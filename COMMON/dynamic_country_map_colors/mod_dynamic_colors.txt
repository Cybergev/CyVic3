#
# Note: the triggers are checked at certain key points in the code, not all the time
# color_key = {
#    color = "black"      # the map color
#    possible = { ... }   # the trigger to enable this color
# }
#
# Example
#dynamic_map_color_swedish_junta = {
#    color = "black"
#	
#	possible = {
#		exists = c:SWE # you /must/ check that a tag exists before doing anything else
#		this = c:SWE
#
#        exists = ig:ig_armed_forces
#        ig:ig_armed_forces = {
#            is_in_government = yes
#        }
#	}
#}
REPLACE_OR_CREATE:EUR_republic = {
	color = "EUR_base_color"
	possible = {
		exists = c:EUR
		THIS = c:EUR
		OR = {
			has_government_type = gov_presidential_democracy
			has_government_type = gov_parliamentary_democracy
		}
	}
}

REPLACE_OR_CREATE:EUR_communist = {
	color = "EUR_communist_color"
	possible = {
		exists = c:EUR
		THIS = c:EUR
		OR = {
			has_government_type = gov_council_dictatorship
			has_government_type = gov_cybernetic_state
			has_government_type = gov_council_single_party_state
			has_government_type = gov_council_republic
		}
	}
}

REPLACE_OR_CREATE:EUR_technate = {
	color = "EUR_tehcnate_color"
	possible = {
		exists = c:EUR
		THIS = c:EUR
		OR = {
			has_government_type = gov_contechne
			has_government_type = gov_enlightened_despotate
			has_government_type = gov_technate_presidential
			has_government_type = gov_technate_parliamentary
		}
	}
}

REPLACE_OR_CREATE:EUR_dictatorship = {
	color = "EUR_dictatorship_color"
	possible = {
		exists = c:EUR
		THIS = c:EUR
		OR = {
			AND = {
				has_law = law_type:law_monarchy
				NOT = {
					has_law = law_type:law_technocracy
				}
			}
			OR = {
				has_government_type = gov_junta
				has_government_type = gov_military_dictatorship
			}
			OR = {
				has_government_type = gov_presidential_dictatorship
				has_government_type = gov_parliamentary_dictatorship
			}
			OR = {
				has_government_type = gov_presidential_oligarchy
				has_government_type = gov_parliamentary_oligarchy
			}
			OR = {
				has_government_type = gov_presidential_single_party_state
				has_government_type = gov_parliamentary_single_party_state
			}
		}
	}
}

REPLACE_OR_CREATE:EUR_fascist = {
	color = "EUR_fascist_color"
	possible = {
		exists = c:EUR
		THIS = c:EUR
		has_government_type = gov_fascist_state
	}
}

REPLACE_OR_CREATE:imperial_japan = {
	color = "white"
	possible = {
		exists = c:JAP
		THIS = c:JAP
		has_global_variable = meiji_restoration_complete
		OR = {
			AND = {
				country_has_state_religion = rel:shinto
				ig:ig_armed_forces = {
					is_in_government = no
				}
				OR = {
					coa_theocracy_trigger = yes
					ruler = {
						interest_group = {
							is_interest_group_type = ig:ig_devout
						}
					}
				}
			}
			coa_absolute_monarchy_trigger = yes
			coa_dictatorship_trigger = yes
			coa_fascist_trigger = yes
			coa_military_trigger = yes
		}
	}
}
